このドキュメントでは開発時のルールを記載します。

## テスト

当プロジェクトではテストフレームワークに **Vitest**、Reactコンポーネントのテストには **React Testing Library** を使用します。

### テストファイルの配置と命名

テストファイルは実装ファイルと同じディレクトリに配置します（コロケーション）。  
これにより、関連するコードとテストが物理的に近くなり、メンテナンス性が向上します。

- **命名**: `*.test.ts` または `*.test.tsx`

### テストの方針

カバレッジの目標値は設定しませんが、以下の基準でテストを作成してください。

- **ユーティリティ関数**: 単体テストを必須とします。
- **UIコンポーネント**: ロジック部分のテストに留めます。DOM構造やスタイルに依存するテストは不要です。

## コーディングルール

品質維持と開発効率向上のため、以下のツールとルールを採用しています。

### Linter / Formatter

高速な解析を実現するため、**oxlint** および **oxfmt** を使用します。  
`package.json` に定義された以下のコマンドを利用して、コードの品質を保ってください。

```bash
# 型チェック
npm run typecheck # tsc --noEmit

# Linter (チェックのみ)
npm run lint # oxlint

# Linter (自動修正適用)
npm run lint:fix # oxlint --fix

# Formatter (チェックのみ)
npm run format # oxfmt --check

# Formatter (自動修正適用)
npm run format:fix # oxfmt

```

インポート順序などのスタイルについては、Linter/Formatterの指摘に従ってください。

### 命名規則

| 対象                    | 書式             | 例                        | 備考                       |
| ----------------------- | ---------------- | ------------------------- | -------------------------- |
| **変数・関数**          | camelCase        | `myVariable`, `fetchUser` |                            |
| **定数**                | UPPER_SNAKE_CASE | `MAX_COUNT`, `API_URL`    |                            |
| **ファイル名**          | kebab-case       | `user-profile.ts`         | 基本                       |
| **Reactコンポーネント** | PascalCase       | `UserProfile.tsx`         | コンポーネントファイルのみ |

### TypeScript

型安全性を高めるため、以下のルールを厳守してください。

- **`any` の禁止**: 原則使用禁止です。ライブラリの型定義不備など、やむを得ない場合に限り、コードコメントに理由を明記した上でLinterやTypecheckのignoreを行ってください。
- **戻り値の型定義**: 関数の戻り値には必ず型注釈を記述してください。
- **型定義の宣言**:
- 基本的に `interface` を使用してください（プレフィックスの `I` や `T` は不要）。
- Union型など、`interface` で表現できない場合に限り `type` エイリアスを使用してください。

### React / コンポーネント設計

- **1ファイル1コンポーネント**: 1つのファイルには1つのコンポーネントのみを定義してください。
- **コンポーネント定義**: アロー関数ではなく、関数宣言（`function`）を優先して使用してください。

## Gitコミットガイドライン

コミットメッセージの書式には厳密なルールを設けています。

これによりプロジェクト履歴を閲覧する際の追跡性が向上し、読みやすいメッセージを実現しています。

### コミットメッセージのフォーマット

コミットメッセージはタイプ、スコープ、件名で構成されます。

```
<type>(<scope>): <subject>

```

タイプと件名は必須ですが、スコープは任意です。

コミットメッセージは100文字を超えてはいけません。

これにより、GitHubなどのツールでメッセージを読みやすくします。

### Revert

コミットをrevertする場合、`revert:` で始まり、その後に打ち消されるコミットのヘッダーを続けます。

本文には `This reverts commit <hash>.` と記述し、`<hash>` には打ち消されるコミットのSHAを指定します。

### Type

以下のいずれかでなければなりません。

- **feat**: 新機能
- **fix**: バグ修正
- **docs**: ドキュメントのみの変更
- **style**: コードの動作に影響しない変更（空白、フォーマット、セミコロンの欠落など）
- **refactor**: バグ修正も機能追加も行わないコード変更（リファクタリング）
- **perf**: パフォーマンスを向上させるコード変更
- **test**: 不足しているテストの追加や既存テストの修正
- **chore**: ビルドプロセスやドキュメント生成などの補助ツールやライブラリの変更

また、TypeまたはScopeの直後に `!` が追加されているコミットはAPIの破壊的変更を導入します。

(Semantic Versioningにおける `MAJOR` に相当します)

### Scope

スコープはコミットの変更箇所を特定するものであれば何でも構いません。

変更が単一のスコープ以上に影響する場合は `*` を使用します。

### Subject

件名には変更の簡潔な説明を含めます。

- 命令形で記述する
- 末尾に句読点やその他記号を付けない
